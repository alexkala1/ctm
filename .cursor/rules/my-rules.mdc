# ğŸ¤– AI Coding Guidelines for Nuxt 4 Project

This document defines the rules and practices all AI coding agents (e.g., Claude, ChatGPT) must follow to ensure code is consistent, maintainable, and aligned with official documentation.

---

## ğŸ”‘ General Principles

- **Documentation first**: Always follow official documentation for Nuxt, Vue, Prisma, Supabase, Pinia, Tailwind, etc.
- **Consistency over creativity**: Reuse proven patterns; avoid ad-hoc solutions.
- **Type-safe and validated**: All data must be typed and validated with `zod` or `yup`.
- **Nuxt conventions**: Respect Nuxtâ€™s auto-imports and folder structure.

---

## ğŸ“‚ Project Structure

- `pages/` â†’ Route views (minimal logic).
- `layouts/` â†’ Shared wrappers.
- `components/` â†’ UI building blocks.
- `composables/` â†’ Reusable logic functions.
- `stores/` â†’ Pinia state management.
- `server/api/` â†’ API routes with validation + Prisma.
- `server/utils/` â†’ Server-side helpers.

**Rule**: Business logic goes in `composables/` or `stores/`, never directly in components.

---

## ğŸŸ¦ TypeScript

- Define types in `/types`.
- No `any`. Use `unknown` + narrowing.
- Use `zod`/`yup` schemas for external data.
- `tsconfig.json` must stay in `strict` mode.

---

## ğŸ“¦ State Management (Pinia)

- One store per domain (e.g., `useAuthStore`).
- Use `pinia-plugin-persistedstate` for persistence.
- Only persist serializable state.
- Mutations only inside store actions.

---

## ğŸ“ Forms & Validation

- Use **vee-validate** + `@vee-validate/zod`.
- Validate both client and server side.
- Example:

  ```ts
  const schema = toTypedSchema(
    z.object({
      email: z.string().email(),
      password: z.string().min(8),
    })
  )
  ```

---

## ğŸ›  Backend & Data

### Supabase

- Use for **auth, storage, realtime**.
- Do not query DB directly from frontend.

### Prisma

- Use for structured database queries.
- Wrap queries in `server/api/` routes.
- Always validate requests with `zod`.

### API Routes

- Place in `server/api/*.ts`.
- Must:
  - Parse + validate body.
  - Handle errors.
  - Return `{ data, error }` consistently.

---

## ğŸ¨ UI & Styling

- Use `@nuxt/ui` first (`<UButton>`, `<UCard>`).
- Use **TailwindCSS** for styling.
- Use `@tailwindcss/forms` for form controls.
- Respect `@nuxtjs/color-mode` (dark/light theme).

---

## ğŸŒ Internationalization

- Use `@nuxtjs/i18n`.
- Never hardcode strings; use `$t('key')`.
- Keep translations in `/locales/*.json`.

---

## ğŸ›¡ Error Handling & Monitoring

- Use `@sentry/nuxt` for error tracking.
- API routes:
  - Catch errors â†’ return `{ error: message }`.
  - Do not expose stack traces.

- Frontend â†’ friendly messages only.

---

## ğŸ“… Date & Time

- Prefer **date-fns**.
- Use **dayjs** for relative time only.
- Store dates as ISO strings, not `Date` objects, in state.

---

## ğŸ§° Utilities

- `lodash-es` â†’ deep operations.
- `papaparse` â†’ CSV import/export.
- `xlsx` â†’ Excel export.
- `file-saver`, `jspdf`, `jspdf-autotable` â†’ file/PDF generation.

---

## ğŸ§ª Testing

- Unit tests: **Vitest** (`vitest`, `@vitest/ui`).
- Component tests: `@testing-library/vue` + `@vue/test-utils`.
- E2E: **Playwright**.
- Mock APIs: **MSW**.
- Accessibility: **axe-core**.

---

## ğŸ§¹ Code Quality

- Lint with `@nuxt/eslint`.
- Format with **Prettier**.
- Accessibility checks: `eslint-plugin-jsx-a11y`.
- CI must run `eslint`, `prettier --check`, `vitest`.

---

## ğŸ”’ Security

- Validate all input (client + server) with `zod`.
- Keep secrets in `.env`.
- Enforce Supabase Row-Level Security (RLS).
- Sanitize all uploads.

---

# âœ… Golden Rules for Claude

1. **Start with official docs** for every dependency.
2. **Respect Nuxt conventions** over custom structures.
3. **Never skip validation** (zod/vee-validate).
4. **Keep logic layered correctly** (UI â†” Composables â†” API â†” DB).
5. **Ask for clarification** instead of guessing when uncertain.

---
